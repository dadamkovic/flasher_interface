\hypertarget{state__machine_8h}{}\doxysection{Core/\+Lib/state\+\_\+machine/state\+\_\+machine.h File Reference}
\label{state__machine_8h}\index{Core/Lib/state\_machine/state\_machine.h@{Core/Lib/state\_machine/state\_machine.h}}
{\ttfamily \#include \char`\"{}stm32f1xx\+\_\+hal.\+h\char`\"{}}\newline
Include dependency graph for state\+\_\+machine.\+h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_s_m___status_type_def}{SM\+\_\+\+Status\+Type\+Def}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{state__machine_8h_a60b69b5f90052e491babbe3e2a606e32}\label{state__machine_8h_a60b69b5f90052e491babbe3e2a606e32}} 
\#define {\bfseries SM\+\_\+\+MAX\+\_\+\+TRANS}~8
\item 
\mbox{\Hypertarget{state__machine_8h_a7af189af52ba63a39ca64df53c09304d}\label{state__machine_8h_a7af189af52ba63a39ca64df53c09304d}} 
\#define {\bfseries SM\+\_\+\+MAX\+\_\+\+SM}~32
\item 
\mbox{\Hypertarget{state__machine_8h_ab691a97a81be6ff1330258129f3aac6b}\label{state__machine_8h_ab691a97a81be6ff1330258129f3aac6b}} 
\#define {\bfseries SM\+\_\+\+ERROR\+\_\+\+HANDLE}~-\/1
\item 
\mbox{\Hypertarget{state__machine_8h_afd271ed426df6806fa4960de7c5e3fcf}\label{state__machine_8h_afd271ed426df6806fa4960de7c5e3fcf}} 
\#define \mbox{\hyperlink{state__machine_8h_afd271ed426df6806fa4960de7c5e3fcf}{SM\+\_\+\+EVAL\+\_\+\+ALL\+\_\+\+TRANS}}
\begin{DoxyCompactList}\small\item\em When defined all transitions will be evaluated to check conflicts. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{state__machine_8h_ad87587a21264c5add135eac54adfee92}\label{state__machine_8h_ad87587a21264c5add135eac54adfee92}} 
typedef int8\+\_\+t {\bfseries SM\+\_\+\+Handle\+Type\+Def}
\item 
\mbox{\Hypertarget{state__machine_8h_adac2f7816d564595cce5bc28743292df}\label{state__machine_8h_adac2f7816d564595cce5bc28743292df}} 
typedef SM\+\_\+\+Bool\+Type\+Def() {\bfseries SM\+\_\+\+Transition\+Func}(void)
\item 
\mbox{\Hypertarget{state__machine_8h_a86753bafd5a8800e2ce6b9f7999aed0b}\label{state__machine_8h_a86753bafd5a8800e2ce6b9f7999aed0b}} 
typedef SM\+\_\+\+Return\+Type\+Def() {\bfseries SM\+\_\+\+State\+Func}(void)
\item 
\mbox{\Hypertarget{state__machine_8h_a3abafc1b6b8d07ae5a8549fa07d0c76c}\label{state__machine_8h_a3abafc1b6b8d07ae5a8549fa07d0c76c}} 
typedef SM\+\_\+\+Handle\+Type\+Def() {\bfseries SM\+\_\+\+Init\+Func}(void)
\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{state__machine_8h_a77db8da804cdd23cead9135fc37f6eea}\label{state__machine_8h_a77db8da804cdd23cead9135fc37f6eea}} 
enum {\bfseries SM\+\_\+\+Bool\+Type\+Def} \{ {\bfseries SM\+\_\+\+TRUE} = 1
, {\bfseries SM\+\_\+\+FALSE} = 0
 \}
\item 
\mbox{\Hypertarget{state__machine_8h_ad8bc7dba25194ab862f260a39ccf3300}\label{state__machine_8h_ad8bc7dba25194ab862f260a39ccf3300}} 
enum {\bfseries SM\+\_\+\+Return\+Type\+Def} \{ {\bfseries SM\+\_\+\+OK} = 0
, {\bfseries SM\+\_\+\+FAIL} = 1
 \}
\item 
\mbox{\Hypertarget{state__machine_8h_ac84548d9029a93d986cbf48f61f6a11a}\label{state__machine_8h_ac84548d9029a93d986cbf48f61f6a11a}} 
enum {\bfseries SM\+\_\+\+Error\+Type\+Def} \{ {\bfseries SM\+\_\+\+NO\+\_\+\+FREE\+\_\+\+HANDLE\+\_\+\+ERR}
, {\bfseries SM\+\_\+\+EXCEEDED\+\_\+\+MAX\+\_\+\+TRANS}
, {\bfseries SM\+\_\+\+MULITPLE\+\_\+\+TRANSITIONS\+\_\+\+ERR}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{state__machine_8h_acdce2cb11d39eff9d025b3fc164b2309}\label{state__machine_8h_acdce2cb11d39eff9d025b3fc164b2309}} 
void {\bfseries sm\+Error\+Handler} (SM\+\_\+\+Error\+Type\+Def error\+\_\+t)
\item 
SM\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{state__machine_8h_a8438a4bb219c56a76ccc265f5cfdec53}{sm\+Add\+State}} (SM\+\_\+\+State\+Func $\ast$state\+\_\+func)
\begin{DoxyCompactList}\small\item\em Adds a new state into the state machine diagram. \end{DoxyCompactList}\item 
SM\+\_\+\+Return\+Type\+Def \mbox{\hyperlink{state__machine_8h_ad3a32b43e95b0b461a523db0477f3926}{sm\+Add\+Transition}} (SM\+\_\+\+Handle\+Type\+Def root\+\_\+id, SM\+\_\+\+Handle\+Type\+Def dest\+\_\+id, SM\+\_\+\+Transition\+Func $\ast$trans\+\_\+c)
\begin{DoxyCompactList}\small\item\em Adds state transition between the root state and dest state. \end{DoxyCompactList}\item 
SM\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{state__machine_8h_a25a067362a806f783750436e34501d7c}{sm\+Next\+State}} (SM\+\_\+\+Handle\+Type\+Def sm\+\_\+id)
\begin{DoxyCompactList}\small\item\em Evaluates the transition conditions and returns handle to next state. \end{DoxyCompactList}\item 
SM\+\_\+\+Return\+Type\+Def \mbox{\hyperlink{state__machine_8h_a3f58320a8b963fa99844f37e93daba23}{sm\+Run\+State}} (SM\+\_\+\+Handle\+Type\+Def sm\+\_\+id)
\begin{DoxyCompactList}\small\item\em Runs the state function in the given state. \end{DoxyCompactList}\item 
SM\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{state__machine_8h_ad34178aa86d320908070ad5273039b48}{sm\+Init}} (SM\+\_\+\+Init\+Func $\ast$init\+\_\+f)
\begin{DoxyCompactList}\small\item\em Wrapper around user initialization function. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyAuthor}{Author}
Daniel Adamkovic (\href{mailto:dadamkovic@protonmail.ch}{\texttt{ dadamkovic@protonmail.\+ch}}) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
05-\/02-\/2023
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2023 
\end{DoxyCopyright}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{state__machine_8h_a8438a4bb219c56a76ccc265f5cfdec53}\label{state__machine_8h_a8438a4bb219c56a76ccc265f5cfdec53}} 
\index{state\_machine.h@{state\_machine.h}!smAddState@{smAddState}}
\index{smAddState@{smAddState}!state\_machine.h@{state\_machine.h}}
\doxysubsubsection{\texorpdfstring{smAddState()}{smAddState()}}
{\footnotesize\ttfamily SM\+\_\+\+Handle\+Type\+Def sm\+Add\+State (\begin{DoxyParamCaption}\item[{SM\+\_\+\+State\+Func $\ast$}]{state\+\_\+func }\end{DoxyParamCaption})}



Adds a new state into the state machine diagram. 


\begin{DoxyParams}{Parameters}
{\em state\+\_\+func} & Function to be ran inside the new state node (can be NULL) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SM\+\_\+\+Return\+Type\+Def Handle of the newly created node or SM\+\_\+\+ERROR\+\_\+\+HANDLE 
\end{DoxyReturn}
\mbox{\Hypertarget{state__machine_8h_ad3a32b43e95b0b461a523db0477f3926}\label{state__machine_8h_ad3a32b43e95b0b461a523db0477f3926}} 
\index{state\_machine.h@{state\_machine.h}!smAddTransition@{smAddTransition}}
\index{smAddTransition@{smAddTransition}!state\_machine.h@{state\_machine.h}}
\doxysubsubsection{\texorpdfstring{smAddTransition()}{smAddTransition()}}
{\footnotesize\ttfamily SM\+\_\+\+Return\+Type\+Def sm\+Add\+Transition (\begin{DoxyParamCaption}\item[{SM\+\_\+\+Handle\+Type\+Def}]{root\+\_\+id,  }\item[{SM\+\_\+\+Handle\+Type\+Def}]{dest\+\_\+id,  }\item[{SM\+\_\+\+Transition\+Func $\ast$}]{trans\+\_\+c }\end{DoxyParamCaption})}



Adds state transition between the root state and dest state. 


\begin{DoxyParams}{Parameters}
{\em root\+\_\+id} & Handle of the root state \\
\hline
{\em dest\+\_\+id} & Handle of the destination state \\
\hline
{\em trans\+\_\+c} & Function pointer to eval. transition condition \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SM\+\_\+\+Return\+Type\+Def SM\+\_\+\+FAIL or SM\+\_\+\+OK 
\end{DoxyReturn}
\mbox{\Hypertarget{state__machine_8h_ad34178aa86d320908070ad5273039b48}\label{state__machine_8h_ad34178aa86d320908070ad5273039b48}} 
\index{state\_machine.h@{state\_machine.h}!smInit@{smInit}}
\index{smInit@{smInit}!state\_machine.h@{state\_machine.h}}
\doxysubsubsection{\texorpdfstring{smInit()}{smInit()}}
{\footnotesize\ttfamily SM\+\_\+\+Handle\+Type\+Def sm\+Init (\begin{DoxyParamCaption}\item[{SM\+\_\+\+Init\+Func $\ast$}]{init\+\_\+f }\end{DoxyParamCaption})}



Wrapper around user initialization function. 


\begin{DoxyParams}{Parameters}
{\em init\+\_\+f} & User initialization function pointer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SM\+\_\+\+Handle\+Type\+Def 
\end{DoxyReturn}
\mbox{\Hypertarget{state__machine_8h_a25a067362a806f783750436e34501d7c}\label{state__machine_8h_a25a067362a806f783750436e34501d7c}} 
\index{state\_machine.h@{state\_machine.h}!smNextState@{smNextState}}
\index{smNextState@{smNextState}!state\_machine.h@{state\_machine.h}}
\doxysubsubsection{\texorpdfstring{smNextState()}{smNextState()}}
{\footnotesize\ttfamily SM\+\_\+\+Handle\+Type\+Def sm\+Next\+State (\begin{DoxyParamCaption}\item[{SM\+\_\+\+Handle\+Type\+Def}]{sm\+\_\+id }\end{DoxyParamCaption})}



Evaluates the transition conditions and returns handle to next state. 


\begin{DoxyParams}{Parameters}
{\em sm\+\_\+id} & Current state handle \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SM\+\_\+\+Handle\+Type\+Def Next state handle 
\end{DoxyReturn}
\mbox{\Hypertarget{state__machine_8h_a3f58320a8b963fa99844f37e93daba23}\label{state__machine_8h_a3f58320a8b963fa99844f37e93daba23}} 
\index{state\_machine.h@{state\_machine.h}!smRunState@{smRunState}}
\index{smRunState@{smRunState}!state\_machine.h@{state\_machine.h}}
\doxysubsubsection{\texorpdfstring{smRunState()}{smRunState()}}
{\footnotesize\ttfamily SM\+\_\+\+Return\+Type\+Def sm\+Run\+State (\begin{DoxyParamCaption}\item[{SM\+\_\+\+Handle\+Type\+Def}]{sm\+\_\+id }\end{DoxyParamCaption})}



Runs the state function in the given state. 


\begin{DoxyParams}{Parameters}
{\em sm\+\_\+id} & State handle \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SM\+\_\+\+Return\+Type\+Def 
\end{DoxyReturn}
